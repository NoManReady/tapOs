var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.SIMPLE_FROUND_POLYFILL=!1;$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(c,t,n){c!=Array.prototype&&c!=Object.prototype&&(c[t]=n.value)};$jscomp.getGlobal=function(c){return"undefined"!=typeof window&&window===c?c:"undefined"!=typeof global&&null!=global?global:c};$jscomp.global=$jscomp.getGlobal(this);
$jscomp.polyfill=function(c,t,n,g){if(t){n=$jscomp.global;c=c.split(".");for(g=0;g<c.length-1;g++){var m=c[g];m in n||(n[m]={});n=n[m]}c=c[c.length-1];g=n[c];t=t(g);t!=g&&null!=t&&$jscomp.defineProperty(n,c,{configurable:!0,writable:!0,value:t})}};$jscomp.polyfill("Array.prototype.fill",function(c){return c?c:function(c,n,g){var m=this.length||0;0>n&&(n=Math.max(0,m+n));if(null==g||g>m)g=m;g=Number(g);0>g&&(g=Math.max(0,m+g));for(n=Number(n||0);n<g;n++)this[n]=c;return this}},"es6","es3");
$jscomp.arrayIteratorImpl=function(c){var t=0;return function(){return t<c.length?{done:!1,value:c[t++]}:{done:!0}}};$jscomp.arrayIterator=function(c){return{next:$jscomp.arrayIteratorImpl(c)}};$jscomp.SYMBOL_PREFIX="jscomp_symbol_";$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};$jscomp.SymbolClass=function(c,t){this.$jscomp$symbol$id_=c;$jscomp.defineProperty(this,"description",{configurable:!0,writable:!0,value:t})};
$jscomp.SymbolClass.prototype.toString=function(){return this.$jscomp$symbol$id_};$jscomp.Symbol=function(){function c(n){if(this instanceof c)throw new TypeError("Symbol is not a constructor");return new $jscomp.SymbolClass($jscomp.SYMBOL_PREFIX+(n||"")+"_"+t++,n)}var t=0;return c}();
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var c=$jscomp.global.Symbol.iterator;c||(c=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("Symbol.iterator"));"function"!=typeof Array.prototype[c]&&$jscomp.defineProperty(Array.prototype,c,{configurable:!0,writable:!0,value:function(){return $jscomp.iteratorPrototype($jscomp.arrayIteratorImpl(this))}});$jscomp.initSymbolIterator=function(){}};
$jscomp.initSymbolAsyncIterator=function(){$jscomp.initSymbol();var c=$jscomp.global.Symbol.asyncIterator;c||(c=$jscomp.global.Symbol.asyncIterator=$jscomp.global.Symbol("Symbol.asyncIterator"));$jscomp.initSymbolAsyncIterator=function(){}};$jscomp.iteratorPrototype=function(c){$jscomp.initSymbolIterator();c={next:c};c[$jscomp.global.Symbol.iterator]=function(){return this};return c};
$jscomp.iteratorFromArray=function(c,t){$jscomp.initSymbolIterator();c instanceof String&&(c+="");var n=0,g={next:function(){if(n<c.length){var m=n++;return{value:t(m,c[m]),done:!1}}g.next=function(){return{done:!0,value:void 0}};return g.next()}};g[Symbol.iterator]=function(){return g};return g};$jscomp.polyfill("Array.prototype.keys",function(c){return c?c:function(){return $jscomp.iteratorFromArray(this,function(c){return c})}},"es6","es3");
(function(c,t){"function"===typeof define&&define.amd?define([],function(){return c.SignaturePad=t()}):"object"===typeof exports?module.exports=t():c.SignaturePad=t()})(this,function(){return function(c){function t(g,m){function n(a){0>a.type.indexOf("mouse")&&(C=!0);return a}function t(a){a=n(a||window.event);if((a.stopPropagation(),"mousedown"!=a.type&&"touchstart"!=a.type)||$(a.srcElement)[0].id!=b.canvasName||C&&1<a.touches.length)return 0;if(1===a.which||C&&1==a.touches.length)N=!0,"svg"!=b.writeType&&
(v.fillStyle=J,v.globalAlpha=ba),E=a=V(C?a.touches[0]:a),w.unshift({time:(new Date).getTime(),dis:0,x:a.x,y:a.y}),W&&(r={top:a.y,right:a.x,bottom:a.y,left:a.x},W=!1),a=w,O(a),P(a);"function"==typeof b.touchstartCallback&&b.touchstartCallback()}function P(a){if(!(1>=a.length)){var d,f,e,k,c,h,H,x,q;2>=a.length?(d=a[1].x,k=a[1].y,e=a[1].x+.5*(a[0].x-a[1].x),h=a[1].y+.5*(a[0].y-a[1].y),f=d+.5*(e-d),c=k+.5*(h-k),H=a[1].r,q=a[1].r+.5*(a[0].r-a[1].r)):(d=a[2].x+.5*(a[1].x-a[2].x),k=a[2].y+.5*(a[1].y-a[2].y),
f=a[1].x,c=a[1].y,e=f+.5*(a[0].x-f),h=c+.5*(a[0].y-c),H=a[2].r+.5*(a[1].r-a[2].r),x=a[1].r,q=x+.5*(a[0].r-x));var p=[];for(a=0;5>a;a++){var g=a/4;x=(1-g)*(1-g)*d+2*g*(1-g)*f+g*g*e;g=(1-g)*(1-g)*k+2*g*(1-g)*c+g*g*h;var X=H+(q-H)/5*a;if(p.push({x:x,y:g,r:X}),3==p.length){var l=p[0].x;var u=p[0].y;var z=p[0].r;var y=p[1].x,B=p[1].y,m=p[2].x,n=p[2].y;var r=p[2].r;p=[];var t=y-l;var I=B-u;var A=2*Math.sqrt(t*t+I*I+1E-4);t=t/A*z;var w=I=I/A*z;var D=-t;var C=y-m;z=B-n;A=2*Math.sqrt(C*C+z*z+1E-4);C=C/A*r;
z=z/A*r;r=-z;A=C;p.push({mx:l+w,my:u+D,color:"#1A1A1A"});p.push({c1x:y+w,c1y:B+D,c2x:y+r,c2y:B+A,ex:m+r,ey:n+A});p.push({c1x:m+r-C,c1y:n+A-z,c2x:m-r-C,c2y:n-A-z,ex:m-r,ey:n-A});p.push({c1x:y-r,c1y:B-A,c2x:y-w,c2y:B-D,ex:l-w,ey:u-D});p.push({c1x:l-w-t,c1y:u-D-I,c2x:l+w-t,c2y:u+D-I,ex:l+w,ey:u+D});p[0].mx=p[0].mx.toFixed(1);p[0].mx=parseFloat(p[0].mx);p[0].my=p[0].my.toFixed(1);p[0].my=parseFloat(p[0].my);for(l=1;l<p.length;l++)p[l].c1x=p[l].c1x.toFixed(1),p[l].c1x=parseFloat(p[l].c1x),p[l].c1y=p[l].c1y.toFixed(1),
p[l].c1y=parseFloat(p[l].c1y),p[l].c2x=p[l].c2x.toFixed(1),p[l].c2x=parseFloat(p[l].c2x),p[l].c2y=p[l].c2y.toFixed(1),p[l].c2y=parseFloat(p[l].c2y),p[l].ex=p[l].ex.toFixed(1),p[l].ex=parseFloat(p[l].ex),p[l].ey=p[l].ey.toFixed(1),p[l].ey=parseFloat(p[l].ey);l=p;l[0].color=J;b.bethelPoint.push(l);u=void 0;if("svg"==b.writeType){void 0===u&&(u=l[0].color);y="M "+l[0].mx+" "+l[0].my+" C";for(B=1;B<l.length;B++)y+=" "+l[B].c1x+" "+l[B].c1y,y+=" "+l[B].c2x+" "+l[B].c2y,y+=" "+l[B].ex+" "+l[B].ey;K.path(y).attr("stroke",
u).attr("stroke-width",1).attr("fill",u)}else{v.beginPath();v.moveTo(l[0].mx,l[0].my);void 0!=u?(v.fillStyle=u,v.strokeStyle=u):(v.fillStyle=l[0].color,v.strokeStyle=l[0].color);for(u=1;u<l.length;u++)v.bezierCurveTo(l[u].c1x,l[u].c1y,l[u].c2x,l[u].c2y,l[u].ex,l[u].ey);v.stroke();v.fill()}p=[{x:x,y:g,r:X}]}}}}function O(a){if(1>=a.length)return void(a[0].r=1);for(var d=(b.distance({x:a[0].x,y:a[0].y},{x:a[1].x,y:a[1].y}),0),f=0,e=0;e<a.length-1&&(d+=a[e].dis,f+=a[e].time-a[e+1].time,!(d>Y));e++);
a[0].r=Math.min(f/(1*d)*b.pressure+b.lineMin,b.lineMax)*Q}function h(a){return a=a.toFixed(4),parseFloat(a)}function Z(a){if(/^(rgb|RGB)/.test(a)){for(var d=a.replace(/(?:\(|\)|rgb|RGB)*/g,"").split(","),b="#",e=0;e<d.length;e++){var k=Number(d[e]).toString(16);2>k.length&&(k="0"+k);b+=k}return 7!==b.length&&(b=a),b}if(/^#([0-9a-fA-f]{3}|[0-9a-fA-f]{6})$/.test(a)){d=a.replace(/#/,"").split("");if(6===d.length)return a;if(3===d.length)for(a="#",e=0;e<d.length;e+=1)a+=d[e]+d[e]}return a}var N=!1,C;
this.writeType="canvas";this.canvasName=g;this.lineMin=.5;this.lineMax=2;this.pressure=1;this.linePrack=[];this.chirography=[];this.currentChirography={};this.transformpdfData=[];this.canvasHeight=this.canvasWidth=0;this.currentBethelLinePoint=[];this.bethelPoint=[];var L=null,R=null,v=null,K=null,ba=1,J="#1A1A1A",Q=1.5,Y=100,S=0,E={},w=[],F=2,G=2,W=!0,r={top:0,right:0,bottom:0,left:0},b=this;this.clearCanvasCallback=this.touchendCallback=this.touchmoveCallback=this.touchstartCallback="";this.init=
function(a,d,f,e){b.writeType="canvas";b.canvas=c.getElementById(b.canvasName);v=b.canvas.getContext("2d");v.rotate(45*Math.PI/180);v.fillStyle="rgba(0,0,0,1)";var k=b.canvas;void 0==a&&(a=720);void 0==d&&(d=1280);void 0==f&&(f=720);void 0==e&&(e=1280);F=f/a;G=e/d;$(k).width(a);$(k).attr("width",f);$(k).height(d);$(k).attr("height",e);b.canvasWidth=f;b.canvasHeight=e;c.getElementById(b.canvasName).addEventListener("mousedown",t,!1);c.getElementById(b.canvasName).addEventListener("mousemove",T,!1);
c.getElementById(b.canvasName).addEventListener("mouseup",U,!1);c.getElementById(b.canvasName).addEventListener("touchstart",t,!1);c.getElementById(b.canvasName).addEventListener("touchmove",T,!1);c.getElementById(b.canvasName).addEventListener("touchend",U,!1);c.getElementById(b.canvasName).addEventListener("touchcancel",aa,!1)};this.initSVG=function(a,d,f,e){b.writeType="svg";void 0==a&&(a=720);void 0==d&&(d=1280);void 0==f&&(f=720);void 0==e&&(e=1280);F=f/a;G=e/d;b.canvas=c.getElementById(b.canvasName);
K=new Snap(b.canvas);K.attr({width:a,height:d,viewBox:"0, 0, "+f+", "+e});c.getElementById(b.canvasName).addEventListener("mousedown",t,!1);c.getElementById(b.canvasName).addEventListener("mousemove",T,!1);c.getElementById(b.canvasName).addEventListener("mouseup",U,!1);c.getElementById(b.canvasName).addEventListener("touchstart",t,!1);c.getElementById(b.canvasName).addEventListener("touchmove",T,!1);c.getElementById(b.canvasName).addEventListener("touchend",U,!1);c.getElementById(b.canvasName).addEventListener("touchcancel",
aa,!1)};this.newCanvas=function(a,d,f,e,k){var h=this.canvas,g=$(h)[0].id;g=c.getElementById(g).getContext("2d");var H=g.getImageData(0,0,h.width,h.height);void 0==a&&(a=720);void 0==d&&(d=1280);void 0==f&&(f=720);void 0==e&&(e=1280);F=f/a;G=e/d;$(h).width(a);$(h).attr("width",f);$(h).height(d);$(h).attr("height",e);b.canvasWidth=f;b.canvasHeight=e;a=parseInt(h.width*(1-1/k));h.height;console.log(a);g.putImageData(H,parseInt(a),0)};this.setCanvasSize=function(a,d,b,e,k,h){void 0==a&&(a=this.width);
void 0==d&&(d=this.height);void 0==innerWidth&&(innerWidth=this.innverWidth);void 0==innerHeight&&(innerHeight=this.innerheight);b=v.getImageData(0,0,this.innerWidth,this.innerHeight);F=innerWidth/a;G=innerHeight/d;$(this.canvas).width(a);$(this.canvas).attr("width",innerWidth);$(this.canvas).height(d);$(this.canvas).attr("height",innerHeight);this.canvasWidth=innerWidth;this.canvasHeight=innerHeight;v.putImageData(b,0,0)};this.setLineColor=function(a){J=a};this.setLineSize=function(a){Q=a};this.setSmoothness=
function(a){Y=a};this.setLineMin=function(a){this.lineMin=a};this.setLineMax=function(a){this.lineMax=a};this.showAllSign=function(a){var d=$(this.canvas)[0].id;d=c.getElementById(d);var b=d.getContext("2d");a=parseFloat(1/a);b.scale(a,a);a=new Image;return a.src=d.toDataURL("image/png"),a};var T=function(a){a=a||window.event;if((b.touchmoveCallback&&b.touchmoveCallback(),"mousemove"!=a.type&&"touchmove"!=a.type)||$(a.srcElement)[0].id!=b.canvasName)return 0;if(C&&1<a.touches.length)return a.stopPropagation(),
a.preventDefault(),a.cancelable&&(a.defaultPrevented||a.preventDefault()),0;if(N||C&&1==a.touches.length)a.cancelable&&(a.defaultPrevented||a.preventDefault()),a=V(C?a.touches[0]:a),a.y<r.top&&(r.top=a.y),0>a.y&&(r.top=0),a.x>r.right&&(r.right=a.x),0>=b.canvasWidth-a.x&&(r.right=b.canvasWidth),a.y>r.bottom&&(r.bottom=a.y),0>=b.canvasHeight-a.y&&(r.bottom=b.canvasHeight),a.x<r.left&&(r.left=a.x),0>a.x&&(r.left=0),S=E,E=a,w.unshift({time:(new Date).getTime(),dis:b.distance(E,S),x:a.x,y:a.y}),a=w,O(a),
P(a);"function"==typeof b.touchmoveCallback&&b.touchmoveCallback()},U=function(a){a=n(a||window.event);if((a.stopPropagation(),"mouseup"!=a.type&&"touchend"!=a.type)||$(a.srcElement)[0].id!=b.canvasName)return 0;if(1===a.which&&N||C&&!(1<a.touches.length)){N=!1;a=V(C?a.changedTouches[0]:a);if(S=E,E=a,w.unshift({time:(new Date).getTime(),dis:b.distance(E,S),x:a.x,y:a.y}),2<w.length)w[0].time,w[w.length-1].time,w.length;"canvas"==b.writeType?(a=w,O(a),P(a),b.chirography.unshift({lineSize:Q,lineColor:J}),
b.linePrack.unshift(w)):b.overlapInCanvas(w);w=[];"function"==typeof b.touchendCallback&&b.touchendCallback()}},aa=function(a){a=n(a||window.event);a.type},V=function(a){if(null==L||null==b.offsetTop)if("svg"==b.writeType)L=$(b.canvas).offset().left,R=$(b.canvas).offset().top;else{var d=0;L=b.canvas.offsetLeft;R=b.canvas.offsetTop;for(var f=b.canvas.parentNode;100>d&&f.tagName&&"BODY"!=f.tagName;)L+=f.offsetLeft,R+=f.offsetTop,f=f.parentNode,d++}d=a.clientX-L;a=a.clientY-R+140;d*=F;a*=G;return{x:d,
y:a}};this.distance=function(a,d){var b=d.x-a.x;a=d.y-a.y;return Math.sqrt(b*b+a*a)};this.reWriteCanvas=function(){v.restore()};this.writeCanvas=function(){b.clearCanvas();for(var a=0;a<b.linePrack.length;a++){var d=b.linePrack[b.linePrack.length-a-1],f=[];v.fillStyle=b.chirography[b.chirography.length-a-1].lineColor;Q=b.chirography[b.chirography.length-a-1].lineSize;J=b.chirography[b.chirography.length-a-1].lineColor;for(var e=0;e<d.length;e++){f.unshift(d[d.length-e-1]);var k=f;O(k);P(k)}}return!0};
this.clearCanvas=function(){"function"==typeof b.clearCanvasCallback&&b.clearCanvasCallback();v&&v.clearRect(0,0,b.canvas.width,b.canvas.height);K&&K.clear()};this.clearCanvasAndData=function(){b.clearCanvas();b.linePrack=[];b.chirography=[];b.bethelPoint=[];W=!0};this.overlapInCanvas=function(a){a=a[0];for(var d=0;d<b.linePrack.length;d++)for(var f=b.linePrack[d],e=0;e<f.length;e++)if(400>(a.x-f[e].x)*(a.x-f[e].x)+(a.y-f[e].y)*(a.y-f[e].y)){b.linePrack.splice(d,1);b.chirography.splice(d,1);b.writeCanvas();
break}};this.overlapLine=function(a,d,b,e){v.isPointInPath(20,50)};this.saveImage=function(){return this.canvas.toDataURL.apply(this.canvas,arguments)};this.coordinateSystem=function(a,d){return{x:a,y:d}};this.transformpdf=function(){for(var a=this.linePrack,d=0;d<a.length;d++){var f=a[d];if(!(2>f.length)){var e,k=f.length;var h=1*f[k-1].x+.1;var c=1*f[k-1].y;var g=f[k-1].r;var x=1*f[k-2].x+.1;var q=1*f[k-2].y;var p=f[k-2].r;var m=x-h;var n=q-c;var l=2*Math.sqrt(m*m+n*n+1E-4);m=m/l*g;var u=n=n/l*
g;var z=-m;var y=[];for(e=3;e<=f.length;e++){var B=1*f[k-e].x;var r=1*f[k-e].y;var t=f[k-e].r;g=(x+B)/2;var w=(q+r)/2;p=(p+t)/2;var v=x-g;var D=q-w;l=2*Math.sqrt(v*v+D*D+1E-4);v=v/l*p;D=D/l*p;l=-D;var A=v;y[0]=b.coordinateSystem(h+u,c+z);y[1]=b.coordinateSystem(x+u,q+z);y[2]=b.coordinateSystem(x+l,q+A);y[3]=b.coordinateSystem(g+l,w+A);y[4]=b.coordinateSystem(g+l-v,w+A-D);y[5]=b.coordinateSystem(g-l-v,w-A-D);y[6]=b.coordinateSystem(g-l,w-A);y[7]=b.coordinateSystem(x-l,q-A);y[8]=b.coordinateSystem(x-
u,q-z);y[9]=b.coordinateSystem(h-u,c-z);y[10]=b.coordinateSystem(h-u-m,c-z-n);y[11]=b.coordinateSystem(h+u-m,c+z-n);y[12]=b.coordinateSystem(h+u,c+z);h=g;c=w;x=B;q=r;p=t;m=-v;n=-D;u=l;z=A;b.transformpdfData.push(y)}y[0]=b.coordinateSystem(h+u,c+z);y[0]=b.coordinateSystem(h+u,c+z)}}};this.getExtrema=function(){r={top:this.canvasHeight*G,right:0,bottom:0,left:this.canvasWidth*F};for(var a=0;a<this.linePrack.length;a++)for(var d=0;d<this.linePrack[a].length;d++)this.linePrack[a][d].y<r.top&&(r.top=this.linePrack[a][d].y),
this.linePrack[a][d].y>r.bottom&&(r.bottom=this.linePrack[a][d].y),this.linePrack[a][d].x>r.right&&(r.right=this.linePrack[a][d].x),this.linePrack[a][d].x<r.left&&(r.left=this.linePrack[a][d].x)};var M=function(a,d,b,e,k){return{x:a*Math.cos(b)-d*Math.sin(b)+e,y:a*Math.sin(b)+d*Math.cos(b)+k}};this.calcRotateCanvasInfo=function(){for(var a,d,b,e,k=[],c=[],g=r.bottom-r.top+60,m=r.right-r.left+60,x=0;x<this.linePrack.length;x++){k[x]=[];c[x]={lineSize:this.chirography[x].lineSize,lineColor:this.chirography[x].lineColor};
for(var q=0;q<this.linePrack[x].length;q++)a=this.linePrack[x][q].x-r.left+30,d=this.linePrack[x][q].y-r.top+30,b=-Math.PI/2,e=r.right-r.left+60,a=M(a,d,b,0,e),k[x][q]={x:h(a.x),y:h(a.y),dis:this.linePrack[x][q].dis,time:this.linePrack[x][q].time,r:this.linePrack[x][q].r}}return{canvasWidth:g/F,canvasHeight:m/G,canvasInnerWidth:g,canvasInnerHeight:m,linePrack:k,chirography:c,bethelPoint:this.bethelPoint}};this.destory=function(){};this.centreRotate=function(a){for(var d,f=-(Math.min(b.canvasWidth*
Math.cos(a),0)+Math.min(b.canvasHeight*Math.cos(a+Math.PI/2),0)),e=-(Math.min(b.canvasWidth*Math.sin(a),0)+Math.min(b.canvasHeight*Math.sin(a+Math.PI/2),0)),k=0;k<b.bethelPoint.length;k++){d=M(b.bethelPoint[k][0].mx,b.bethelPoint[k][0].my,a,f,e);b.bethelPoint[k][0].mx=d.x;b.bethelPoint[k][0].my=d.y;for(var c=1;c<b.bethelPoint[k].length;c++)d=M(b.bethelPoint[k][c].c1x,b.bethelPoint[k][c].c1y,a,f,e),b.bethelPoint[k][c].c1x=d.x,b.bethelPoint[k][c].c1y=d.y,d=M(b.bethelPoint[k][c].c2x,b.bethelPoint[k][c].c2y,
a,f,e),b.bethelPoint[k][c].c2x=d.x,b.bethelPoint[k][c].c2y=d.y,d=M(b.bethelPoint[k][c].ex,b.bethelPoint[k][c].ey,a,f,e),b.bethelPoint[k][c].ex=d.x,b.bethelPoint[k][c].ey=d.y}d=Math.abs(b.canvasWidth*Math.sin(a))+Math.abs(b.canvasHeight*Math.sin(a+Math.PI/2));b.canvasWidth=Math.abs(b.canvasWidth*Math.cos(a))+Math.abs(b.canvasHeight*Math.cos(a+Math.PI/2));b.canvasHeight=d};this.toSVG=function(a){a=a?new Snap(a):new Snap;for(var d=0;d<this.bethelPoint.length;d++){for(var b="M "+h(this.bethelPoint[d][0].mx/
this.canvasHeight)+" "+h(this.bethelPoint[d][0].my/this.canvasHeight)+" C",e=1;e<this.bethelPoint[d].length;e++)b+=" "+h(this.bethelPoint[d][e].c1x/this.canvasHeight)+" "+h(this.bethelPoint[d][e].c1y/this.canvasHeight),b+=" "+h(this.bethelPoint[d][e].c2x/this.canvasHeight)+" "+h(this.bethelPoint[d][e].c2y/this.canvasHeight),b+=" "+h(this.bethelPoint[d][e].ex/this.canvasHeight)+" "+h(this.bethelPoint[d][e].ey/this.canvasHeight);a.path(b).attr("stroke",this.bethelPoint[d][0].color).attr("stroke-width",
1/this.canvasHeight).attr("fill",this.bethelPoint[d][0].color)}d="0 0 "+h(this.canvasWidth/this.canvasHeight)+" 1";return a.attr("viewBox",d),a.attr("width",h(this.canvasWidth/this.canvasHeight)+"px"),a.attr("height","1px"),a.outerSVG()};this.toCommonSVG=function(a){a=a?new Snap(a):new Snap;for(var d=0;d<b.bethelPoint.length;d++){for(var c="M "+h(b.bethelPoint[d][0].mx)+" "+h(b.bethelPoint[d][0].my)+" C",e=1;e<b.bethelPoint[d].length;e++)c+=" "+h(b.bethelPoint[d][e].c1x)+" "+h(b.bethelPoint[d][e].c1y),
c+=" "+h(b.bethelPoint[d][e].c2x)+" "+h(b.bethelPoint[d][e].c2y),c+=" "+h(b.bethelPoint[d][e].ex)+" "+h(b.bethelPoint[d][e].ey);a.path(c).attr("stroke",b.bethelPoint[d][0].color).attr("stroke-width",1).attr("fill",b.bethelPoint[d][0].color)}return a.attr("viewBox","0 0 "+b.canvasWidth+" "+b.canvasHeight),a.attr("width",b.canvasWidth+"px"),a.attr("height",b.canvasHeight+"px"),a.outerSVG()};this.pathToSVG=function(a){var b=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1,c=$("body").width(),
e=$("body").height();if(1==b){b="svg"+Math.floor(1E4*Math.random());var k=$("<svg id="+b+"></svg>");k.css("position","fixed");$("body").prepend(k);b=new Snap("#"+b);b.attr("width",c+"px");b.attr("height",e+"px");for(k=0;k<a.length;k++){for(var g="M "+h(a[k][0].mx*c)+" "+h((1-a[k][0].my)*e)+" C",m=1;m<a[k].length;m++)g+=" "+h(a[k][m].c1x*c)+" "+h((1-a[k][m].c1y)*e),g+=" "+h(a[k][m].c2x*c)+" "+h((1-a[k][m].c2y)*e),g+=" "+h(a[k][m].ex*c)+" "+h((1-a[k][m].ey)*e);b.path(g).attr("stroke",a[k][0].color).attr("stroke-width",
1).attr("fill","none")}}else Object.keys(a).forEach(function(b){b=a[b];for(var d=0;d<b.length;d++){var k="svg"+d+Math.floor(1E4*Math.random()),h=$("<svg id="+k+"></svg>");h.css("position","fixed");$("body").prepend(h);k="#"+k;k=new Snap(k);k.attr("width",c+"px");k.attr("height",e+"px");for(h=0;h<b[d].length;h++){for(var g="M "+b[d][h][0].mx*c+" "+(1-b[d][h][0].my)*e+" C",f=1;f<b[d][h].length;f++)g+=" "+b[d][h][f].c1x*c+" "+(1-b[d][h][f].c1y)*e,g+=" "+b[d][h][f].c2x*c+" "+(1-b[d][h][f].c2y)*e,g+=" "+
b[d][h][f].ex*c+" "+(1-b[d][h][f].ey)*e;k.path(g).attr("stroke",b[d][h][0].color).attr("stroke-width",1).attr("fill",b[d][h][0].color)}}})};this.SVGToPath=function(a,b,c,e,k,g,m,n,r,q){if(void 0===a||void 0===b||void 0===c||void 0===e||void 0===k||void 0===g||void 0===m)return void console.log("\u53c2\u6570\u7f3a\u5931");b=new Snap(b);var d=[];if(void 0===n||void 0===r||void 0===q){var f=parseFloat(b.attr("height"));n=parseFloat(b.getBBox().width);r=parseFloat(b.getBBox().height);q=f/r}var t="";return b.selectAll("path").forEach(function(a){for(var b,
c=a.attr("d").split(" "),l=[],f=0;f<c.length;f++)b=c[f].split(","),2==b.length?(l.push(b[0]),l.push(b[1])):l.push(b[0]);b=[];for(f=0;f<l.length;f++){c=l[f];if(isNaN(parseInt(c.slice(0,1)))){if(t=c.slice(0,1),1==l[f].length&&"Z"!=t)continue;c=c.slice(1)}switch(t){case "M":var p=l[f+1];f++;var n=a.attr("stroke");n="none"==n?"#000000":Z(n);console.log(h(1-(parseFloat(p)*q+m)/k));b.push({mx:h(parseFloat(c)*q/e+g/e),my:h(1-(parseFloat(p)*q+m)/k),color:n});break;case "Q":b.push({c1x:h(parseFloat(c)*q/e+
g/e),c1y:h(1-(parseFloat(l[f+1])*q+m)/k),c2x:h(parseFloat(c)*q/e+g/e),c2y:h(1-(parseFloat(l[f+1])*q+m)/k),ex:h(parseFloat(l[f+2])*q/e+g/e),ey:h(1-(parseFloat(l[f+3])*q+m/k))});f+=3;break;case "C":b.push({c1x:h(parseFloat(c)*q/e+g/e),c1y:h(1-(parseFloat(l[f+1])*q+m)/k),c2x:h(parseFloat(l[f+2])*q/e+g/e),c2y:h(1-(parseFloat(l[f+3])*q+m)/k),ex:h(parseFloat(l[f+4])*q/e+g/e),ey:h(1-(parseFloat(l[f+5])*q+m)/k)});f+=5;break;case "L":b.push({c1x:h(parseFloat(c)*q/e+g/e),c1y:h(1-(parseFloat(l[f+1])*q+m)/k),
c2x:h(parseFloat(c)*q/e+g/e),c2y:h(1-(parseFloat(l[f+1])*q+m)/k),ex:h(parseFloat(c)*q/e+g/e),ey:h(1-(parseFloat(l[f+1])*q+m)/k)});f++;break;case "Z":d.push(b),b=[]}}b.length&&d.push(b)}),void 0===a[c]&&(a[c]=[]),a[c].push(d),a};this.SVGToPathNoPage=function(a,b,c,e,k,g,m,n){if(void 0===a||void 0===b||void 0===c||void 0===e||void 0===k)return void console.log("\u53c2\u6570\u7f3a\u5931");a=new Snap(a);var d=[];if(void 0===g||void 0===m||void 0===n){var f=parseFloat(a.attr("height"));g=parseFloat(a.getBBox().width);
m=parseFloat(a.getBBox().height);n=m/f}var p="";return a.selectAll("path").forEach(function(a){for(var g,l=a.attr("d").split(" "),f=[],m=0;m<l.length;m++)g=l[m].split(","),2==g.length?(f.push(g[0]),f.push(g[1])):f.push(g[0]);g=[];for(m=0;m<f.length;m++){l=f[m];if(isNaN(parseInt(l.slice(0,1)))){if(p=l.slice(0,1),1==f[m].length&&"Z"!=p)continue;l=l.slice(1)}switch(p){case "M":var r=f[m+1];m++;var q=a.attr("stroke");q="none"==q?"#000000":Z(q);g.push({mx:h(parseFloat(l)*n/b+e/b),my:h(1-(parseFloat(r)*
n+k)/c),color:q});break;case "Q":g.push({c1x:h(parseFloat(l)*n/b+e/b),c1y:h(1-(parseFloat(f[m+1])*n+k)/c),c2x:h(parseFloat(l)*n/b+e/b),c2y:h(1-(parseFloat(f[m+1])*n+k)/c),ex:h(parseFloat(f[m+2])*n/b+e/b),ey:h(1-(parseFloat(f[m+3])*n+k/c))});m+=3;break;case "C":g.push({c1x:h(parseFloat(l)*n/b+e/b),c1y:h(1-(parseFloat(f[m+1])*n+k)/c),c2x:h(parseFloat(f[m+2])*n/b+e/b),c2y:h(1-(parseFloat(f[m+3])*n+k)/c),ex:h(parseFloat(f[m+4])*n/b+e/b),ey:h(1-(parseFloat(f[m+5])*n+k)/c)});m+=5;break;case "L":g.push({c1x:h(parseFloat(l)*
n/b+e/b),c1y:h(1-(parseFloat(f[m+1])*n+k)/c),c2x:h(parseFloat(l)*n/b+e/b),c2y:h(1-(parseFloat(f[m+1])*n+k)/c),ex:h(parseFloat(l)*n/b+e/b),ey:h(1-(parseFloat(f[m+1])*n+k)/c)});m++;break;case "Z":d.push(g),g=[]}}g.length&&d.push(g)}),d}}var n=function(c,m){this.times=2;this.canvas=c;this.isSign=!1;this.painting=new t("canvasId");this.initCanvas(m);this.painting.touchstartCallback=m.onBegin;this.painting.touchendCallback=m.onEnd;this.lineSize=m.lineSize||5;this.setSize(this.lineSize);this.lineMax=m.lineMax||
4;this.painting.setLineMax(this.lineMax);this.lineMin=m.lineMin||.5;this.painting.setLineMin(this.lineMin);this.smoothness=m.smoothness||100;this.painting.setSmoothness(this.smoothness)};n.prototype.initCanvas=function(c){var g=c.canvas_width;c=c.canvas_height;this.painting.init(g,c,g*this.times,c*this.times);this.canvas.getContext("2d").fillStyle="rgba(0,0,0,0)"};n.prototype.setSize=function(c){this.painting.setLineSize(c)};n.prototype.setColor=function(c){this.painting.setLineColor(c)};n.prototype.clear=
function(){this.isSign=!1;this.painting.clearCanvasAndData()};n.prototype.setWebHandWrite=function(c,m){var g=this.canvas.getContext("2d");g.textAlign="left";g.textBaseline="bottom";g.shadowBlur=0;g.font=m.fontStyle+" "+parseFloat(m.fontSize)*this.times+"px "+m.fontFamily;g.fillStyle=m.fontColor;for(m=0;c&&m<c.length;m++){var n=c[m];console.log(n.top);g.fillText(n.txt,n.left*this.times,n.top*this.times)}};n.prototype.toDataURL=function(c){for(var g=this.canvas.getContext("2d").getImageData(0,0,this.canvas.width,
this.canvas.height),n=1;n<g.width;n++)for(var t=1;t<g.height;t++);g=this.painting.saveImage();c(g)};"use strict";return n}(document)});
// V2.0.0.400    
